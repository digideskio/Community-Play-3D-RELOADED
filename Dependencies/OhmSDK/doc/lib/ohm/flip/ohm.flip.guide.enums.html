<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Flip Programming Guide: Using Enums</title>
<link rel="stylesheet" href="docpage.css" type="text/css" />
</head>

<script type="text/javascript">
function searchfield_focus(obj)
{
obj.style.color="#000"
if (obj.value=="Search Library")
	{obj.value=""}
}
</script>


<body>

<div id="header">
<div style="width: 1006px;">
<!--<form method="get" class="search" style="padding-top: 5px;"  action="http://www.google.com/search">
<input onfocus="searchfield_focus(this)" type="search" class="search" name="q" value="Search Library">
<input type="hidden" name="sitesearch" value="">
</form>-->
</div>
<p><a href="index.html">Ohm Force Developer Library</a><a href="ohm.flip.guide.about.html">Flip Programming Guide</a></p>
</div>

<div id="toc">
<p>Flip Programming Guide</p>
<ul>
<li><a href="ohm.flip.guide.about.html">About Flip Programming Guide</a></li>
<li><a href="ohm.flip.guide.design.html">Designing your Flip Application</a></li>
<li><a href="ohm.flip.guide.class.html">Writing a Flip Class Part 1</a></li>
<li><a href="ohm.flip.guide.class2.html">Writing a Flip Class Part 2</a></li>
<li><a href="ohm.flip.guide.containers.html">Using Containers</a></li>
<li><a href="ohm.flip.guide.enums.html"><strong>Using Enums</strong></a>
	<ul>
	<li><a href="ohm.flip.guide.enums.html#why">Why Use an Enum ?</a></li>
	<li><a href="ohm.flip.guide.enums.html#using">Using Enums</a></li>
	</ul>
</li>
<li><a href="ohm.flip.guide.blob.html">Using Blobs</a></li>
<li><a href="ohm.flip.guide.objectref.html">Using ObjectRefs</a></li>
<li><a href="ohm.flip.guide.cue.html">Using Cues</a></li>
<li><a href="ohm.flip.guide.navigation.html">Navigating the Model</a></li>
<li><a href="ohm.flip.guide.observer.html">Writing a DocumentObserver</a></li>
<li><a href="ohm.flip.guide.validator.html">Writing a DocumentValidator</a></li>
<li><a href="ohm.flip.guide.undo.html">Using the Undo/Redo system</a></li>
<li><a href="ohm.flip.guide.const.html">Managing Pseudo Const Members</a></li>
<li><a href="ohm.flip.guide.mold.html">Using an ObjectMold</a></li>
<li><a href="ohm.flip.guide.conversion.html">Writing a Converter</a></li>
<li><a href="ohm.flip.guide.tweaker.html">Writing a DocumentTweaker</a></li>
</ul>

<div class="bottomspacer">&nbsp;</div>
</div>

<div id="content">

<div class="nav" align="right"><a href="ohm.flip.guide.containers.html">previous</a><span>&nbsp;</span><a href="ohm.flip.guide.blob.html">next</a></div>

<h1>Using Enums</h1>

<p>This chapter will describe the use of
<span class="code">flip::Enum</span> 
with the Flip framework.</p>
<p>In the following, we will show the step by step construction of an hypothetic
<span class="code">MyClass</span> 
class.</p>
<p>This chapter will assume that your company is called ACME making the application “Product”.</p>
<h2><a name="why">Why Use an Enum ?</a></h2>
<p>The Flip framework offers an
<span class="code">flip::Enum</span> 
template class which instantiated
type is made over of an
<span class="code">enum</span> 
in the client code.</p>
<p>The
<span class="code">flip::Enum</span> 
type itselfs just holds an integer value, but offers
in practice the following additionnal features when compared to
<span class="code">flip::Int64</span> 
:</p>
<ul>
<li>It checks for out of bound values. Any out of bounds value is handled
at the Flip level as a structural validation failure and therefore does
not need to be implemented in server logical validation code
</li>
<li>Each value of the original
<span class="code">enum</span> 
is mapped to a character string
used when the back-end writes the document. This makes the reading of the
document a lot easier, in particular for
<span class="code">enum</span> 
that contains a lot of values
</li>
</ul>
<h2><a name="using">Using Enums</a></h2>
<p>In the same way as for Flip classes, Flip enums must be declared. The code
itself is very similar to the use of
<span class="code">ClassDescription</span> 
and
<span class="code">ClassDescManager</span> 
and the two classes to use are
<span class="code">EnumDescription</span> 
and
<span class="code">EnumDescManager</span> 
.</p>
<div class="important"><p><strong>Important:</strong>An enum
<strong>must</strong> be declared before the concrete type of the enum can
be used as a class member</p></div>
<p>The following listing shows the declaration of the
<span class="code">MyClass</span> 
with an
<span class="code">enum</span> </p>
<div class="codeblock">
<table>
<tr><td><pre>#include "ohm/flip/Object.h"</pre></td></tr>
<tr><td><pre>#include "ohm/flip/Enum.h"</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>class MyClass</pre></td></tr>
<tr><td><pre>:  public ohm::flip::Object</pre></td></tr>
<tr><td><pre>{</pre></td></tr>
<tr><td><pre>public:</pre></td></tr>
<tr><td><pre>   enum MyEnum</pre></td></tr>
<tr><td><pre>   {</pre></td></tr>
<tr><td><pre>                        MyEnum_FOO = 0,</pre></td></tr>
<tr><td><pre>                        MyEnum_BAR,</pre></td></tr>
<tr><td><pre>      </pre></td></tr>
<tr><td><pre>                        MyEnum_NBR_ELT</pre></td></tr>
<tr><td><pre>   }</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>   static void          declare ();</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>                        MyClass (ohm::flip::DocumentBase & document);</pre></td></tr>
<tr><td><pre>   virtual              ~MyClass () {}</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>private:</pre></td></tr>
<tr><td><pre>   ohm::flip::Enum &lt;MyEnum, MyEnum_FOO, MyEnum_NBR_ELT&gt;</pre></td></tr>
<tr><td><pre>                        _my_enum;</pre></td></tr>
<tr><td><pre>};</pre></td></tr>
</table>
</div>
<ul>
<li>The first template parameter for
<span class="code">Enum</span> 
is the
<span class="code">enum</span> 
itself
</li>
<li>The second template parameter,
<span class="code">MIN</span> 
, is the minimum value of the
<span class="code">enum</span> 
</li>
<li>The third template parameter,
<span class="code">NBR</span> 
, indicates the number of value in the
<span class="code">enum</span> 
</li>
</ul>
<p>When testing the internal integer
<span class="code">value</span> 
for correct range, the following test is made</p>
<div class="codeblock">
<table>
<tr><td><pre>MIN &lt;= value &lt; MIN + NBR</pre></td></tr>
</table>
</div>
<p>That is the value must be in the
<span class="code">[MIN; MIN + NBR)</span> 
range.</p>
<p>The following listing shows the declaration of the
<span class="code">Enum</span> 
to the Flip framework.</p>
<div class="codeblock">
<table>
<tr><td><small><pre>void  MyClass::declare ()</pre></small></td></tr>
<tr><td><small><pre>{</pre></small></td></tr>
<tr><td><small><pre>   using namespace ohm::flip;</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><strong><pre>   EnumDescription &lt;MyEnum&gt;::use ().set_name ("acme.product.MyClass.MyEnum");</pre></strong></td></tr>
<tr><td><strong><pre>   EnumDescription &lt;MyEnum&gt;::use ().push_enum_desc (MyEnum_FOO, "MyEnum_FOO");</pre></strong></td></tr>
<tr><td><strong><pre>   EnumDescription &lt;MyEnum&gt;::use ().push_enum_desc (MyEnum_BAR, "MyEnum_BAR");</pre></strong></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><strong><pre>   EnumDescManager::declare (EnumDescription &lt;MyEnum&gt;::use ());</pre></strong></td></tr>
<tr><td><small><pre>}</pre></small></td></tr>
</table>
</div>
<p>After the enum has been declared, the members of the
<span class="code">Enum</span> 
of its type can
be declared.</p>


<div class="nav" align="right"><a href="ohm.flip.guide.containers.html">previous</a><span>&nbsp;</span><a href="ohm.flip.guide.blob.html">next</a></div>

<div class="bottomspacer">&nbsp;</div>

</div>

<footer>
<a href="index.html">Ohm Force Developer Library</a> > <a href="ohm.flip.guide.about.html">Flip Programming Guide</a> > <a href="ohm.flip.guide.enums.html">Using Enums</a>
</footer>


</body>

</html>