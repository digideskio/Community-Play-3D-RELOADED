<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Flip Reference: DocumentClient Class Reference</title>
<link rel="stylesheet" href="docpage.css" type="text/css" />
</head>

<script type="text/javascript">
function searchfield_focus(obj)
{
obj.style.color="#000"
if (obj.value=="Search Library")
	{obj.value=""}
}
</script>


<body>

<div id="header">
<div style="width: 1006px;">
<!--<form method="get" class="search" style="padding-top: 5px;"  action="http://www.google.com/search">
<input onfocus="searchfield_focus(this)" type="search" class="search" name="q" value="Search Library">
<input type="hidden" name="sitesearch" value="">
</form>-->
</div>
<p><a href="index.html">Ohm Force Developer Library</a><a href="ohm.flip.reference.overview.html">Flip Reference</a></p>
</div>

<div id="toc">
<p>Flip Reference</p>
<ul>
<li><a href="ohm.flip.reference.overview.html">Overview</a></li>
<li><a href="ohm.flip.reference.args.html">Args Class Reference</a></li>
<li><a href="ohm.flip.reference.array.html">Array Template Class Reference</a></li>
<li><a href="ohm.flip.reference.bool.html">Bool Class Reference</a></li>
<li><a href="ohm.flip.reference.blob.html">Blob Class Reference</a></li>
<li><a href="ohm.flip.reference.classdescmgr.html">ClassDescManager Class Reference</a></li>
<li><a href="ohm.flip.reference.classdesc.html">ClassDescription Template Class Reference</a></li>
<li><a href="ohm.flip.reference.collection.html">Collection Template Class Reference</a></li>
<li><a href="ohm.flip.reference.cue.html">Cue Class Reference</a></li>
<li><a href="ohm.flip.reference.docbase.html">DocumentBase Class Reference</a></li>
<li><a href="ohm.flip.reference.docclient.html"><strong>DocumentClient Class Reference</strong></a>
	<ul>
	<li><a href="ohm.flip.reference.docclient.html#overview">Overview</a></li>
	<li><a href="ohm.flip.reference.docclient.html#diagram">Partial Class Diagram</a></li>
	<li><a href="ohm.flip.reference.docclient.html#header">Methods Overview</a></li>
	<li><a href="ohm.flip.reference.docclient.html#method">Methods</a></li>
	</ul>
</li>
<li><a href="ohm.flip.reference.doclocal.html">DocumentLocal Class Reference</a></li>
<li><a href="ohm.flip.reference.docserver.html">DocumentServer Class Reference</a></li>
<li><a href="ohm.flip.reference.docsignal.html">DocumentSignal Class Reference</a></li>
<li><a href="ohm.flip.reference.doctweaker.html">DocumentTweaker Template Class Reference</a></li>
<li><a href="ohm.flip.reference.docvalid.html">DocumentValidator Template Class Reference</a></li>
<li><a href="ohm.flip.reference.enum.html">Enum Template Class Reference</a></li>
<li><a href="ohm.flip.reference.enumdescmgr.html">EnumDescManager Class Reference</a></li>
<li><a href="ohm.flip.reference.enumdesc.html">EnumDescription Template Class Reference</a></li>
<li><a href="ohm.flip.reference.findmask.html">FindMask Enum Reference</a></li>
<li><a href="ohm.flip.reference.float64.html">Float64 Class Reference</a></li>
<li><a href="ohm.flip.reference.int64.html">Int64 Class Reference</a></li>
<li><a href="ohm.flip.reference.object.html">Object Class Reference</a></li>
<li><a href="ohm.flip.reference.objectmold.html">ObjectMold Class Reference</a></li>
<li><a href="ohm.flip.reference.objectmolddata.html">ObjectMoldData Class Reference</a></li>
<li><a href="ohm.flip.reference.objectref.html">ObjectRef Template Class Reference</a></li>
<li><a href="ohm.flip.reference.pasteboard.html">PasteBoard Class Reference</a></li>
<li><a href="ohm.flip.reference.ref.html">Ref Type Reference</a></li>
<li><a href="ohm.flip.reference.scribe.html">Scribe Class Reference</a></li>
<li><a href="ohm.flip.reference.txguard.html">TxSessionGuard Class Reference</a></li>
<li><a href="ohm.flip.reference.validwriter.html">ValidationReportWriter Class Reference</a></li>
</ul>

<div class="bottomspacer">&nbsp;</div>
</div>

<div id="content">

<div class="nav" align="right"><a href="ohm.flip.reference.docbase.html">previous</a><span>&nbsp;</span><a href="ohm.flip.reference.doclocal.html">next</a></div>

<h1>DocumentClient Class Reference</h1>

<table>
<tr><td><p>Namespace
</p></td><td><p><span class="code">ohm::flip</span> 
</p></td></tr>
<tr><td><p>Inherits from
</p></td><td><p><a href="ohm.flip.reference.docbase.html"><span class="code">ohm::flip::DocumentBase</span> </a>
</p></td></tr>
<tr><td><p>Declared in
</p></td><td><p><span class="code">ohm/flip/DocumentClient.h</span> 
</p></td></tr>
</table>
<h2><a name="overview">Overview</a></h2>
<p>The
<span class="code">DocumentClient</span> 
class implements a Flip document used on the client side.
The following sections will only document the public API.</p>
<h2><a name="diagram">Partial Class Diagram</a></h2>
<center><img src="ohm.flip.reference.docclient.diagram.png" /></center>
<h2><a name="header">Methods Overview</a></h2>
<h3><a name="header.assign">Constructor</a></h3>
<ul>
<li><a href="#method.ctor"><span class="code">DocumentClient</span> 
constructor</a>
</li>
</ul>
<h3><a name="header.assign">Destructor</a></h3>
<ul>
<li><a href="#method.restore"><span class="code">restore</span> </a>
</li>
</ul>
<h3><a name="header.observer">Observing</a></h3>
<ul>
<li><a href="#method.bind"><span class="code">bind</span> </a>
</li>
</ul>
<h3><a name="header.observer">Manipulating</a></h3>
<ul>
<li><a href="#method.AutoUserInputs"><span class="code">AutoUserInputs</span> 
class</a>
</li>
</ul>
<h3><a name="header.undo">Scribe (Undo System)</a></h3>
<ul>
<li><a href="#method.add"><span class="code">add</span> </a>
</li>
<li><a href="#method.remove"><span class="code">remove</span> </a>
</li>
</ul>
<h3><a name="header.undo">Reading/Writing</a></h3>
<ul>
<li><a href="#method.read"><span class="code">read</span> </a>
</li>
<li><a href="#method.write_document"><span class="code">write_document</span> </a>
</li>
<li><a href="#method.write_document_head"><span class="code">write_document_head</span> </a>
</li>
</ul>
<h2><a name="method">Methods</a></h2>
<div class="sectioncode">
<h3><a name="method.ctor">DocumentClient constructor</a></h3>
<p>Constructs a
<span class="code">DocumentClient</span> 
.</p>
<div class="codeblock">
<table>
<tr><td><pre>               DocumentClient (</pre></td></tr>
<tr><td><pre>                  DocumentClientMasterSlot & parent,</pre></td></tr>
<tr><td><pre>                  const std::string & user_name,</pre></td></tr>
<tr><td><pre>                  archi::Int32 thread_id</pre></td></tr>
<tr><td><pre>               );</pre></td></tr>
</table>
</div>
<p><span class="code">parent</span> 
denotes the
<span class="code">DocumentClientMasterSlot</span> 
to
which the document is attached. It represents a Flip thread.</p>
</div>
<div class="sectioncode">
<h3><a name="method.restore">restore</a></h3>
<p>Restore a
<span class="code">DocumentClient</span> 
.</p>
<div class="codeblock">
<table>
<tr><td><pre>void           restore ();</pre></td></tr>
</table>
</div>
</div>
<div class="sectioncode">
<h3><a name="method.bind">bind</a></h3>
<p>Bind the
<span class="code">DocumentObserver</span> 
to the document.</p>
<div class="codeblock">
<table>
<tr><td><pre>void           bind (DocumentObserverMaster & observer);</pre></td></tr>
</table>
</div>
<p>After the document is bound, the
<span class="code">observer</span> 
will start to receive
document model changes through the
<span class="code">document_changed</span> 
message, and signals
through the
<span class="code">signal</span> 
message.</p>
<p>The
<span class="code">observer</span> 
will be automatically unbound when the document is released.</p>
<div class="note"><p><strong>Note:</strong>The document only accepts one
<span class="code">DocumentObserver</span> 
.</p></div>
</div>
<div class="sectioncode">
<h3><a name="method.AutoUserInputs">AutoUserInputs class</a></h3>
<p>Implements an automatic way to let know the Flip framework that a
transaction begin might occur, or that a transaction comes to its end, and
acts as a safe guard.</p>
<div class="codeblock">
<table>
<tr><td><pre>            AutoUserInputs (DocumentBase & document);</pre></td></tr>
<tr><td><pre>virtual     ~AutoUserInputs ();</pre></td></tr>
</table>
</div>
<p>Each function that might change the model must be surrounded with an automatic
variable of the type of this class. Usually this is done in the top function
that handles user inputs or timers.</p>
<div class="codeblock">
<p><strong>Listing</strong>Example of implementation
</p>
<table>
<tr><td><pre>void  MySystemView::handle_user_inputs (SystemEvent & event)</pre></td></tr>
<tr><td><pre>{</pre></td></tr>
<tr><td><pre>   ohm::flip::AutoUserInputs auto_ui (_document);</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>   switch (event._type)</pre></td></tr>
<tr><td><pre>   {</pre></td></tr>
<tr><td><small><pre>      [...]</pre></small></td></tr>
<tr><td><pre>   }</pre></td></tr>
<tr><td><pre>}</pre></td></tr>
</table>
</div>
</div>
<div class="sectioncode">
<h3><a name="method.add">add</a></h3>
<p>Adds a
<a href="ohm.flip.reference.scribe.html"><span class="code">Scribe</span> </a>
to the document
for the current transaction.</p>
<p>The
<span class="code">Scribe</span> 
must be added before each transaction that must be part of the
undo system. In particular, if no
<span class="code">Scribe</span> 
is added before the transaction
is made, then the transaction will not be part of the undo system, which is
sometimes wanted, for example when scrolling in a document.</p>
<div class="codeblock">
<table>
<tr><td><pre>void           add (Scribe & scribe);</pre></td></tr>
</table>
</div>
<p>The
<a href="ohm.flip.reference.scribe.html">Scribe</a>
system is
what implements the undo/redo system in the Flip framework.</p>
</div>
<div class="sectioncode">
<h3><a name="method.remove">remove</a></h3>
<p>Removes a
<a href="ohm.flip.reference.scribe.html"><span class="code">Scribe</span> </a>
from the document.</p>
<div class="codeblock">
<table>
<tr><td><pre>void           remove (Scribe & scribe);</pre></td></tr>
</table>
</div>
<p>The
<a href="ohm.flip.reference.scribe.html">Scribe</a>
system is
what implements the undo/redo system in the Flip framework.</p>
</div>
<div class="sectioncode">
<h3><a name="method.read">read</a></h3>
<p>Reads a document from
<span class="code">data</span> 
.</p>
<div class="codeblock">
<table>
<tr><td><pre>void           read_document (const DataMaster & doc_data);</pre></td></tr>
</table>
</div>
<p>In a nutshell,
<span class="code">DataMaster</span> 
implements a shared pointer that works
cross operating system processes.</p>
</div>
<div class="sectioncode">
<h3><a name="method.write_document">write_document</a></h3>
<p>Writes a document and returns it into a shared pointer type object,
without any latent transactions that wouldn’t be still validated by
the server.</p>
<div class="codeblock">
<table>
<tr><td><pre>DataSPtr       write_document ();</pre></td></tr>
</table>
</div>
<p>In a nutshell,
<span class="code">DataSPtr</span> 
is a shared pointer of
<span class="code">std::vector &lt;ohm::archi::UByte&gt;</span> 
.</p>
</div>
<div class="sectioncode">
<h3><a name="method.write_document_head">write_document_head</a></h3>
<p>Writes a document and returns it into a shared pointer type object,
with all the latent transactions that wouldn’t be still validated by
the server.</p>
<div class="codeblock">
<table>
<tr><td><pre>DataSPtr       write_document_head ();</pre></td></tr>
</table>
</div>
<p>In a nutshell,
<span class="code">DataSPtr</span> 
is a shared pointer of
<span class="code">std::vector &lt;ohm::archi::UByte&gt;</span> 
.</p>
</div>


<div class="nav" align="right"><a href="ohm.flip.reference.docbase.html">previous</a><span>&nbsp;</span><a href="ohm.flip.reference.doclocal.html">next</a></div>

<div class="bottomspacer">&nbsp;</div>

</div>

<footer>
<a href="index.html">Ohm Force Developer Library</a> > <a href="ohm.flip.reference.overview.html">Flip Reference</a> > <a href="ohm.flip.reference.docclient.html">DocumentClient Class Reference</a>
</footer>


</body>

</html>