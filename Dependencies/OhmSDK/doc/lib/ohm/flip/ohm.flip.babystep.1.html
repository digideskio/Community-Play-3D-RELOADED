<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Flip BabyStep Tutorial: BabyStep 1: Binding Flip</title>
<link rel="stylesheet" href="docpage.css" type="text/css" />
</head>

<script type="text/javascript">
function searchfield_focus(obj)
{
obj.style.color="#000"
if (obj.value=="Search Library")
	{obj.value=""}
}
</script>


<body>

<div id="header">
<div style="width: 1006px;">
<!--<form method="get" class="search" style="padding-top: 5px;"  action="http://www.google.com/search">
<input onfocus="searchfield_focus(this)" type="search" class="search" name="q" value="Search Library">
<input type="hidden" name="sitesearch" value="">
</form>-->
</div>
<p><a href="index.html">Ohm Force Developer Library</a><a href="ohm.flip.babystep.about.html">Flip BabyStep Tutorial</a></p>
</div>

<div id="toc">
<p>Flip BabyStep Tutorial</p>
<ul>
<li><a href="ohm.flip.babystep.about.html">About Flip BabyStep Tutorial</a></li>
<li><a href="ohm.flip.babystep.0.html">BabyStep 0: Starting Point</a></li>
<li><a href="ohm.flip.babystep.1.html"><strong>BabyStep 1: Binding Flip</strong></a>
	<ul>
	<li><a href="ohm.flip.babystep.1.html#document">Adding a Document</a></li>
	</ul>
</li>
<li><a href="ohm.flip.babystep.2.html">BabyStep 2: Adding the Root Object</a></li>
<li><a href="ohm.flip.babystep.3.html">BabyStep 3: Interacting with the Model</a></li>
</ul>

<div class="bottomspacer">&nbsp;</div>
</div>

<div id="content">

<div class="nav" align="right"><a href="ohm.flip.babystep.0.html">previous</a><span>&nbsp;</span><a href="ohm.flip.babystep.2.html">next</a></div>

<h1>BabyStep 1: Binding Flip</h1>

<p>This chapter will be our first modification of the code exposed in
<a href="ohm.flip.babystep.0.html">BabyStep 0: Starting Point</a>
. Here we will bind flip with our
code, so that flip can be used in our application.</p>
<h2><a name="document">Adding a Document</a></h2>
<h3><a name="document.skeletongui.h">BabystepGui.h</a></h3>
<p>First, we are going to add a document to our application. The document is a flip class
that will actually store, manage and own our data model.
In the
<span class="code">BabystepGui.h</span> 
we will add the following lines :</p>
<div class="codeblock">
<p><strong>Listing</strong>Modifying
<span class="code">BabystepGui.h</span> 
</p>
<table>
<tr><td><small><pre>/*\\\ INCLUDE FILES \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><strong><pre>#include "ModelRoot.h"                                   // 1.</pre></strong></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><strong><pre>#include "ohm/flip/DocumentObserver.h"                   // 2.</pre></strong></td></tr>
<tr><td><strong><pre>#include "ohm/flip/DocumentLocal.h"                      // 3.</pre></strong></td></tr>
<tr><td><small><pre>#include "ohm/opa/ApplicationWindowSimple.h"</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><small><pre>class BabystepGui</pre></small></td></tr>
<tr><td><strong><pre>:  public ohm::flip::DocumentObserver &lt;ModelRoot&gt;        // 4.</pre></strong></td></tr>
<tr><td><small><pre>{</pre></small></td></tr>
<tr><td><small><pre>/*\\\ PUBLIC \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/</pre></small></td></tr>
<tr><td><small><pre>public:</pre></small></td></tr>
<tr><td><small><pre>                  BabystepGui (ohm::opa::ApplicationWindowSimple & window);</pre></small></td></tr>
<tr><td><small><pre>   virtual        ~BabystepGui ();</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><strong><pre>   // ohm::flip::DocumentObserver &lt;ModelRoot&gt;            // 5.</pre></strong></td></tr>
<tr><td><strong><pre>   virtual void   document_changed (ModelRoot & root);</pre></strong></td></tr>
<tr><td><strong><pre>   virtual void   signal (ohm::flip::Object * obj_ptr, ohm::archi::UInt32 type, const ohm::flip::DataMaster & signal_data);</pre></strong></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><small><pre>/*\\\ PROTECTED \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/</pre></small></td></tr>
<tr><td><small><pre>protected:</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><small><pre>/*\\\ PRIVATE \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/</pre></small></td></tr>
<tr><td><small><pre>private:</pre></small></td></tr>
<tr><td><small><pre>   ohm::opa::ApplicationWindowSimple &</pre></small></td></tr>
<tr><td><small><pre>                  _window;</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><strong><pre>   ohm::flip::DocumentLocal</pre></strong></td></tr>
<tr><td><strong><pre>                  _document_local;                       // 6.</pre></strong></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><small><pre>}; // class BabystepGui</pre></small></td></tr>
</table>
</div>
<ol>
<li>include the
<span class="code">ModelRoot</span> 
class...
</li>
<li>... as well as the
<span class="code">DocumentObserver</span> 
: this will allow
<span class="code">BabystepGui</span> 
to act as a view of the model
</li>
<li>include the basic document
</li>
<li>enable the
<span class="code">BabystepGui</span> 
to be a view of the document model...
</li>
<li>...by implementing the two functions
<span class="code">document_changed</span> 
and
<span class="code">signal</span> 
defined as pure virtual in
<span class="code">DocumentObserver</span> 
</li>
<li>add the flip managed document itself
</li>
</ol>
<h3><a name="document.skeletongui.cpp">BabystepGui.cpp</a></h3>
<p>Then we are going to change the definition file to reflect the changes we made in the header.</p>
<div class="codeblock">
<p><strong>Listing</strong>Modifying
<span class="code">BabystepGui.cpp</span> 
</p>
<table>
<tr><td><small><pre>/*\\\ INCLUDE FILES \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><small><pre>#include "BabystepGui.h"</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><small><pre>/*\\\ PUBLIC \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\*/</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><small><pre>BabystepGui::BabystepGui (ohm::opa::ApplicationWindowSimple & window)</pre></small></td></tr>
<tr><td><small><pre>:  _window (window)</pre></small></td></tr>
<tr><td><strong><pre>,  _document_local (*this)                                  // 1.</pre></strong></td></tr>
<tr><td><small><pre>{</pre></small></td></tr>
<tr><td><strong><pre>   _document_local.init (window.get ("--document_path"));   // 2.</pre></strong></td></tr>
<tr><td><strong><pre></pre></strong></td></tr>
<tr><td><strong><pre>   _window.bind_pre_post_ui &lt;                               // 3.</pre></strong></td></tr>
<tr><td><strong><pre>      ohm::flip::DocumentLocal,</pre></strong></td></tr>
<tr><td><strong><pre>      &ohm::flip::DocumentLocal::notify_pre_user_inputs_tasks,</pre></strong></td></tr>
<tr><td><strong><pre>      &ohm::flip::DocumentLocal::notify_post_user_inputs_tasks</pre></strong></td></tr>
<tr><td><strong><pre>   &gt; (_document_local);</pre></strong></td></tr>
<tr><td><small><pre>}</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><small><pre>BabystepGui::~BabystepGui ()</pre></small></td></tr>
<tr><td><small><pre>{</pre></small></td></tr>
<tr><td><small><pre>}</pre></small></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><strong><pre>void  BabystepGui::document_changed (ModelRoot & root)</pre></strong></td></tr>
<tr><td><strong><pre>{</pre></strong></td></tr>
<tr><td><strong><pre>}</pre></strong></td></tr>
<tr><td><small><pre></pre></small></td></tr>
<tr><td><strong><pre>void  BabystepGui::signal (ohm::flip::Object * obj_ptr, ohm::archi::UInt32 type, const ohm::flip::DataMaster & signal_data)</pre></strong></td></tr>
<tr><td><strong><pre>{</pre></strong></td></tr>
<tr><td><strong><pre>}</pre></strong></td></tr>
</table>
</div>
<ol>
<li>bind the document to our observer
</li>
<li>and tell the document where to read/write its file.
<span class="code">window.get</span> 
will fetch the launch arguments to retrieve the document path
</li>
<li>bind the window to the document to notify it when a potential user input will begins and ends
</li>
</ol>
<p>In this program, the executable will be launched like this :</p>
<div class="codeblock">
<table>
<tr><td><pre>babystep --document_path /Users/me/Documents/babystep.odf</pre></td></tr>
</table>
</div>
<p>The first time the program is launched it will automatically create
the
<span class="code">babystep.odf</span> 
document on quit.
The next time the program will be launched, it will read the
<span class="code">babystep.odf</span> 
document
on launch, and will write it on quit.</p>
<p>Now that a flip document has been created for our application, we need to add it some objects
for it to be useful.</p>


<div class="nav" align="right"><a href="ohm.flip.babystep.0.html">previous</a><span>&nbsp;</span><a href="ohm.flip.babystep.2.html">next</a></div>

<div class="bottomspacer">&nbsp;</div>

</div>

<footer>
<a href="index.html">Ohm Force Developer Library</a> > <a href="ohm.flip.babystep.about.html">Flip BabyStep Tutorial</a> > <a href="ohm.flip.babystep.1.html">BabyStep 1: Binding Flip</a>
</footer>


</body>

</html>